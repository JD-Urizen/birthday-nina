* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%);
    min-height: 100vh;
    display: flex;
    justify-content: center;
    align-items: center;
    overflow: hidden;
    position: relative;
}

.bg-circle {
    position: absolute;
    border-radius: 50%;
    opacity: 0.2;
    animation: floatOrb 20s infinite ease-in-out;
    filter: blur(60px);
}

.bg-circle:nth-child(1) {
    width: 500px;
    height: 500px;
    background: radial-gradient(circle, #ff69b4, #ff1493);
    top: -100px;
    left: -100px;
    animation-delay: 0s;
}

.bg-circle:nth-child(2) {
    width: 400px;
    height: 400px;
    background: radial-gradient(circle, #da70d6, #ba55d3);
    top: 50%;
    right: -100px;
    animation-delay: 7s;
}

.bg-circle:nth-child(3) {
    width: 450px;
    height: 450px;
    background: radial-gradient(circle, #a855f7, #9370db);
    bottom: -100px;
    left: 30%;
    animation-delay: 14s;
}

@keyframes floatOrb {
    0%, 100% {
        transform: translate(0, 0) scale(1);
        opacity: 0.2;
    }
    33% {
        transform: translate(50px, -50px) scale(1.1);
        opacity: 0.25;
    }
    66% {
        transform: translate(-30px, 30px) scale(0.95);
        opacity: 0.15;
    }
}

.stars {
    position: absolute;
    width: 100%;
    height: 100%;
    overflow: hidden;
}

.stars::before,
.stars::after {
    content: '';
    position: absolute;
    width: 3px;
    height: 3px;
    background: white;
    border-radius: 50%;
    box-shadow: 50px 100px white, 150px 50px white, 250px 150px white, 350px 80px white, 450px 120px white, 550px 90px white, 100px 200px white, 200px 250px white, 300px 220px white, 400px 280px white, 500px 240px white, 600px 290px white, 80px 350px white, 180px 320px white, 280px 380px white, 380px 340px white, 480px 370px white, 580px 330px white;
    animation: twinkle 4s infinite ease-in-out;
}

.stars::after {
    animation-delay: 2s;
}

@keyframes twinkle {
    0%, 100% { opacity: 0.3; transform: scale(1); }
    50% { opacity: 1; transform: scale(1.2); }
}

.back-button {
    position: fixed;
    top: 25px;
    left: 25px;
    background: rgba(255, 255, 255, 0.95);
    color: #d946ef;
    padding: 14px 28px;
    border-radius: 50px;
    text-decoration: none;
    font-weight: bold;
    box-shadow: 0 8px 25px rgba(0,0,0,0.3);
    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    z-index: 1000;
    display: flex;
    align-items: center;
    gap: 10px;
    backdrop-filter: blur(10px);
    border: 2px solid rgba(255, 255, 255, 0.3);
}

.back-button:hover {
    transform: translateX(-8px) scale(1.05);
    box-shadow: 0 12px 35px rgba(217, 70, 239, 0.4);
    background: white;
}

.container {
    text-align: center;
    position: relative;
    z-index: 5;
}

.instruction {
    color: white;
    font-size: 1.8em;
    margin-bottom: 35px;
    text-shadow: 0 4px 15px rgba(0, 0, 0, 0.5);
    font-weight: 600;
    background: linear-gradient(135deg, rgba(255, 255, 255, 0.25), rgba(255, 255, 255, 0.1));
    padding: 25px 50px;
    border-radius: 70px;
    backdrop-filter: blur(30px);
    border: 3px solid rgba(255, 255, 255, 0.4);
    box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3), inset 0 1px 0 rgba(255, 255, 255, 0.5);
    animation: glowPulse 3s infinite alternate;
    transition: all 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

.instruction.hidden {
    opacity: 0;
    transform: translateY(-30px);
}

@keyframes glowPulse {
    0% {
        box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3), inset 0 1px 0 rgba(255, 255, 255, 0.5), 0 0 30px rgba(255, 105, 180, 0.4);
    }
    100% {
        box-shadow: 0 15px 50px rgba(0, 0, 0, 0.4), inset 0 1px 0 rgba(255, 255, 255, 0.7), 0 0 50px rgba(255, 105, 180, 0.7);
    }
}

.start-button {
    position: relative;
    background: linear-gradient(135deg, #ff1493, #ff69b4, #da70d6, #a855f7);
    background-size: 300% 300%;
    color: white;
    font-size: 1.5em;
    font-weight: bold;
    padding: 22px 55px;
    border: none;
    border-radius: 60px;
    cursor: pointer;
    overflow: hidden;
    box-shadow: 0 12px 45px rgba(255, 20, 147, 0.6), 0 0 70px rgba(255, 105, 180, 0.4);
    transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
    animation: gradientMove 4s infinite ease-in-out, buttonFloat 3s infinite ease-in-out;
    border: 3px solid rgba(255, 255, 255, 0.3);
}

@keyframes gradientMove {
    0%, 100% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
}

@keyframes buttonFloat {
    0%, 100% { transform: translateY(0px); }
    50% { transform: translateY(-10px); }
}

.button-content {
    position: relative;
    z-index: 2;
    display: flex;
    align-items: center;
    gap: 15px;
}

.button-icon {
    font-size: 1.4em;
    animation: iconBounce 1.5s infinite ease-in-out;
}

.button-icon:last-child {
    animation-delay: 0.75s;
}

@keyframes iconBounce {
    0%, 100% { transform: translateY(0) scale(1); }
    50% { transform: translateY(-8px) scale(1.2); }
}

.button-glow {
    position: absolute;
    top: -50%;
    left: -50%;
    width: 200%;
    height: 200%;
    background: linear-gradient(45deg, transparent, rgba(255, 255, 255, 0.4), transparent);
    transform: rotate(45deg);
    animation: buttonShine 2.5s infinite;
}

@keyframes buttonShine {
    0% { transform: translateX(-100%) rotate(45deg); }
    100% { transform: translateX(100%) rotate(45deg); }
}

.start-button:hover {
    transform: scale(1.08) translateY(-5px);
    box-shadow: 0 18px 60px rgba(255, 20, 147, 0.8), 0 0 90px rgba(255, 105, 180, 0.6);
}

.start-button:active {
    transform: scale(1.02) translateY(-2px);
}

.cake-container {
    position: relative;
    display: inline-block;
    transform: scale(1);
    animation: cakeAppear 1.2s cubic-bezier(0.68, -0.55, 0.265, 1.55);
    filter: drop-shadow(0 25px 50px rgba(0, 0, 0, 0.4));
}

@keyframes cakeAppear {
    0% {
        transform: scale(0) rotate(-180deg);
        opacity: 0;
    }
    70% {
        transform: scale(1.1) rotate(10deg);
    }
    100% {
        transform: scale(1) rotate(0deg);
        opacity: 1;
    }
}

.candles-container {
    position: absolute;
    top: -90px;
    left: 50%;
    transform: translateX(-50%);
    display: flex;
    gap: 28px;
    z-index: 10;
}

.candle-holder {
    position: relative;
    animation: candleEnter 1s cubic-bezier(0.68, -0.55, 0.265, 1.55) backwards;
}

.candle-holder:nth-child(1) { animation-delay: 0.2s; }
.candle-holder:nth-child(2) { animation-delay: 0.3s; }
.candle-holder:nth-child(3) { animation-delay: 0.4s; }
.candle-holder:nth-child(4) { animation-delay: 0.5s; }
.candle-holder:nth-child(5) { animation-delay: 0.6s; }

@keyframes candleEnter {
    0% {
        transform: translateY(-120px) scale(0) rotate(-180deg);
        opacity: 0;
    }
    70% {
        transform: translateY(-10px) scale(1.1) rotate(10deg);
    }
    100% {
        transform: translateY(0) scale(1) rotate(0deg);
        opacity: 1;
    }
}

.candle {
    width: 18px;
    height: 70px;
    border-radius: 5px 5px 0 0;
    position: relative;
    margin: 0 auto;
    box-shadow: 0 8px 20px rgba(0, 0, 0, 0.4), inset 0 2px 5px rgba(255, 255, 255, 0.3);
    animation: candleWiggle 4s infinite ease-in-out;
}

.candle-pink { background: linear-gradient(to right, #ff1493, #ff69b4, #ff1493); }
.candle-purple { background: linear-gradient(to right, #ba55d3, #da70d6, #ba55d3); }
.candle-yellow { background: linear-gradient(to right, #ffd700, #ffed4e, #ffd700); }
.candle-blue { background: linear-gradient(to right, #1e90ff, #4169e1, #1e90ff); }
.candle-green { background: linear-gradient(to right, #32cd32, #90ee90, #32cd32); }

.candle-stripe {
    position: absolute;
    width: 100%;
    height: 8px;
    background: rgba(255, 255, 255, 0.5);
    top: 22px;
    border-radius: 2px;
    box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.2);
}

@keyframes candleWiggle {
    0%, 100% { transform: rotate(0deg); }
    25% { transform: rotate(-2deg); }
    50% { transform: rotate(0deg); }
    75% { transform: rotate(2deg); }
}

.wick {
    width: 2px;
    height: 12px;
    background: #333;
    position: absolute;
    top: -12px;
    left: 50%;
    transform: translateX(-50%);
    border-radius: 2px;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
}

.flame {
    width: 24px;
    height: 35px;
    background: radial-gradient(ellipse at center, #ffff00 0%, #ffaa00 30%, #ff6600 60%, transparent 80%);
    border-radius: 50% 50% 50% 50% / 60% 60% 40% 40%;
    position: absolute;
    top: -42px;
    left: 50%;
    transform: translateX(-50%);
    animation: flicker 0.2s infinite alternate ease-in-out;
    box-shadow: 0 0 25px #ff6600, 0 0 50px rgba(255, 102, 0, 0.7);
    filter: blur(0.8px);
    opacity: 1;
    transition: opacity 0.5s ease-out, transform 0.5s ease-out;
}

.flame.blown-out {
    opacity: 0;
    transform: translateX(-50%) scale(0);
}

.flame::before {
    content: '';
    position: absolute;
    width: 14px;
    height: 18px;
    background: radial-gradient(ellipse at center, #ffffff 0%, #ffff00 40%, transparent 70%);
    border-radius: 50%;
    top: 5px;
    left: 50%;
    transform: translateX(-50%);
}

@keyframes flicker {
    0% {
        transform: translateX(-50%) scaleY(1) scaleX(1);
        filter: blur(0.8px);
    }
    100% {
        transform: translateX(-50%) scaleY(1.12) scaleX(0.92);
        filter: blur(1.2px);
    }
}

.smoke {
    position: absolute;
    top: -42px;
    left: 50%;
    width: 8px;
    height: 8px;
    background: #999;
    border-radius: 50%;
    opacity: 0;
    animation: smokeRise 2s ease-out forwards;
    filter: blur(4px);
}

@keyframes smokeRise {
    0% {
        transform: translate(-50%, 0) scale(1);
        opacity: 0.7;
    }
    100% {
        transform: translate(-50%, -80px) scale(3);
        opacity: 0;
    }
}

.cake-layer {
    position: relative;
    margin: 0 auto;
    border-radius: 0 0 18px 18px;
    transition: all 0.8s cubic-bezier(0.4, 0, 0.2, 1);
}

.cake-top {
    width: 200px;
    height: 85px;
    background: linear-gradient(135deg, #ff1493 0%, #ff69b4 50%, #ff1493 100%);
    box-shadow: 0 12px 45px rgba(255, 20, 147, 0.7), inset 0 -6px 25px rgba(0, 0, 0, 0.3), inset 0 6px 15px rgba(255, 255, 255, 0.2);
    animation: layerAppear 1s cubic-bezier(0.68, -0.55, 0.265, 1.55) 0.3s backwards;
    z-index: 3;
}

.cake-middle {
    width: 280px;
    height: 95px;
    background: linear-gradient(135deg, #da70d6 0%, #ba55d3 50%, #da70d6 100%);
    box-shadow: 0 12px 45px rgba(186, 85, 211, 0.7), inset 0 -6px 25px rgba(0, 0, 0, 0.3), inset 0 6px 15px rgba(255, 255, 255, 0.2);
    animation: layerAppear 1s cubic-bezier(0.68, -0.55, 0.265, 1.55) 0.5s backwards;
    z-index: 2;
}

.cake-bottom {
    width: 360px;
    height: 105px;
    background: linear-gradient(135deg, #9370db 0%, #8b008b 50%, #9370db 100%);
    box-shadow: 0 12px 45px rgba(147, 112, 219, 0.7), inset 0 -6px 25px rgba(0, 0, 0, 0.3), inset 0 6px 15px rgba(255, 255, 255, 0.2);
    animation: layerAppear 1s cubic-bezier(0.68, -0.55, 0.265, 1.55) 0.7s backwards;
    border-radius: 0 0 25px 25px;
    z-index: 1;
}

@keyframes layerAppear {
    0% {
        transform: translateY(150px) scale(0.3) rotate(-10deg);
        opacity: 0;
    }
    70% {
        transform: translateY(-10px) scale(1.05) rotate(5deg);
    }
    100% {
        transform: translateY(0) scale(1) rotate(0deg);
        opacity: 1;
    }
}

.frosting {
    position: absolute;
    top: -20px;
    left: 50%;
    transform: translateX(-50%);
    height: 40px;
    border-radius: 50% 50% 0 0;
    overflow: visible;
}

.frosting-top {
    width: 220px;
    background: linear-gradient(to bottom, #ffb6c1, #ffc0cb);
    box-shadow: 0 -8px 25px rgba(255, 182, 193, 0.8), inset 0 3px 10px rgba(255, 255, 255, 0.4);
}

.frosting-middle {
    width: 300px;
    background: linear-gradient(to bottom, #dda0dd, #ee82ee);
    box-shadow: 0 -8px 25px rgba(221, 160, 221, 0.8), inset 0 3px 10px rgba(255, 255, 255, 0.4);
}

.frosting-bottom {
    width: 380px;
    background: linear-gradient(to bottom, #d8bfd8, #dda0dd);
    box-shadow: 0 -8px 25px rgba(216, 191, 216, 0.8), inset 0 3px 10px rgba(255, 255, 255, 0.4);
}

.frosting::after {
    content: '';
    position: absolute;
    bottom: -18px;
    left: 0;
    width: 100%;
    height: 20px;
    background-image: radial-gradient(circle at 50% 0%, currentColor 60%, transparent 60%);
    background-size: 24px 20px;
    background-position: 0 0;
    background-repeat: repeat-x;
}

.frosting-top::after { 
    color: #ffc0cb; 
    background-size: 22px 18px;
}

.frosting-middle::after { 
    color: #ee82ee;
    background-size: 24px 20px;
}

.frosting-bottom::after { 
    color: #dda0dd;
    background-size: 26px 22px;
}

.cake-decoration-row {
    position: absolute;
    bottom: 25px;
    left: 50%;
    transform: translateX(-50%);
    display: flex;
    gap: 18px;
    font-size: 1.3em;
}

.cake-dot {
    animation: decorationPulse 2.5s infinite ease-in-out;
    filter: drop-shadow(0 0 8px rgba(255, 255, 255, 0.9));
}

.cake-dot:nth-child(1) { animation-delay: 0s; }
.cake-dot:nth-child(2) { animation-delay: 0.3s; }
.cake-dot:nth-child(3) { animation-delay: 0.6s; }
.cake-dot:nth-child(4) { animation-delay: 0.9s; }
.cake-dot:nth-child(5) { animation-delay: 1.2s; }

@keyframes decorationPulse {
    0%, 100% { transform: scale(1) rotate(0deg); opacity: 0.9; }
    50% { transform: scale(1.4) rotate(180deg); opacity: 1; }
}

.cake-plate {
    width: 400px;
    height: 35px;
    background: linear-gradient(135deg, #c0c0c0, #e8e8e8, #c0c0c0);
    border-radius: 50%;
    margin: 12px auto 0;
    box-shadow: 0 25px 70px rgba(0, 0, 0, 0.6), inset 0 4px 12px rgba(255, 255, 255, 0.7);
    position: relative;
    animation: layerAppear 1s cubic-bezier(0.68, -0.55, 0.265, 1.55) 0.9s backwards;
}

.plate-shine {
    position: absolute;
    top: 8px;
    left: 20%;
    width: 60%;
    height: 10px;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.8), transparent);
    border-radius: 50%;
    animation: plateShine 4s infinite ease-in-out;
}

@keyframes plateShine {
    0%, 100% { opacity: 0.5; transform: translateX(0); }
    50% { opacity: 1; transform: translateX(10px); }
}

.message-container {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%) scale(0.3);
    opacity: 0;
    pointer-events: none;
    transition: all 1.3s cubic-bezier(0.68, -0.55, 0.265, 1.55);
    z-index: 100;
}

.message-container.show {
    opacity: 1;
    transform: translate(-50%, -50%) scale(1);
    pointer-events: auto;
}

.birthday-message {
    background: linear-gradient(135deg, rgba(255, 255, 255, 0.98), rgba(255, 240, 245, 0.98));
    padding: 35px 45px;
    border-radius: 30px;
    box-shadow: 0 30px 90px rgba(0, 0, 0, 0.6), 0 0 100px rgba(255, 105, 180, 0.8), inset 0 2px 0 rgba(255, 255, 255, 0.8);
    color: #8b008b;
    max-width: 550px;
    max-height: 80vh;
    overflow-y: auto;
    border: 4px solid #ff69b4;
    position: relative;
    animation: messageFloat 4s infinite ease-in-out;
    backdrop-filter: blur(15px);
    -webkit-overflow-scrolling: touch;
    scroll-behavior: smooth;
}

.birthday-message::-webkit-scrollbar {
    width: 10px;
}

.birthday-message::-webkit-scrollbar-track {
    background: rgba(255, 182, 193, 0.2);
    border-radius: 10px;
}

.birthday-message::-webkit-scrollbar-thumb {
    background: linear-gradient(135deg, #ff69b4, #da70d6);
    border-radius: 10px;
}

.birthday-message::-webkit-scrollbar-thumb:hover {
    background: linear-gradient(135deg, #ff1493, #ba55d3);
}

@keyframes messageFloat {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-15px); }
}

.message-header {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 15px;
    margin-bottom: 25px;
}

.header-emoji {
    font-size: 2.8em;
    animation: spin 5s infinite linear;
}

.header-emoji:last-child {
    animation-direction: reverse;
}

@keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
}

.birthday-message h1 {
    font-size: 2.3em;
    margin: 0;
    background: linear-gradient(45deg, #ff1493, #ff69b4, #da70d6, #ba55d3);
    background-size: 300% 300%;
    -webkit-background-clip: text;
    background-clip: text;
    -webkit-text-fill-color: transparent;
    animation: gradientShift 4s infinite ease-in-out;
    font-weight: 800;
}

@keyframes gradientShift {
    0%, 100% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
}

.message-content {
    line-height: 1.8;
    font-size: 1em;
}

.message-content p {
    margin-bottom: 18px;
}

.message-content p:first-child {
    font-size: 1.2em;
}

.message-footer {
    text-align: center;
    font-weight: bold;
    font-size: 1.1em;
    margin-top: 25px;
    color: #ff1493;
}

@media (max-width: 768px) {
    .back-button {
        top: 15px;
        left: 15px;
        padding: 12px 24px;
        font-size: 0.9em;
    }

    .instruction {
        font-size: 1.3em;
        padding: 18px 35px;
        margin-bottom: 25px;
        border-radius: 50px;
    }
    
    .start-button {
        font-size: 1.2em;
        padding: 18px 40px;
    }
    
    .button-text {
        font-size: 0.9em;
    }
    
    .button-icon {
        font-size: 1.2em;
    }
    
    .cake-top { 
        width: 140px; 
        height: 60px; 
    }
    
    .cake-middle { 
        width: 200px; 
        height: 70px; 
    }
    
    .cake-bottom { 
        width: 260px; 
        height: 80px; 
    }
    
    .frosting-top { width: 160px; }
    .frosting-middle { width: 220px; }
    .frosting-bottom { width: 280px; }
    
    .cake-plate { 
        width: 280px; 
        height: 28px;
    }
    
    .candles-container {
        gap: 18px;
        top: -75px;
    }
    
    .candle {
        width: 14px;
        height: 55px;
    }
    
    .flame {
        width: 20px;
        height: 28px;
        top: -35px;
    }
    
    .wick {
        height: 10px;
        top: -10px;
    }
    
    .cake-decoration-row {
        font-size: 1.1em;
        gap: 14px;
        bottom: 18px;
    }
    
    .birthday-message {
        padding: 25px 30px;
        max-width: 90vw;
        max-height: 75vh;
        border-radius: 25px;
        border: 3px solid #ff69b4;
    }
    
    .message-header {
        gap: 10px;
        margin-bottom: 18px;
    }
    
    .header-emoji {
        font-size: 2.2em;
    }
    
    .birthday-message h1 {
        font-size: 1.8em;
    }
    
    .message-content {
        font-size: 0.9em;
        line-height: 1.7;
    }
    
    .message-content p {
        margin-bottom: 15px;
    }
    
    .message-content p:first-child {
        font-size: 1.15em;
    }
    
    .message-footer {
        font-size: 1em;
        margin-top: 18px;
    }
}

@media (max-width: 480px) {
    .instruction {
        font-size: 1.1em;
        padding: 15px 25px;
    }

    .start-button {
        font-size: 1em;
        padding: 15px 30px;
    }

    .cake-top { width: 110px; height: 50px; }
    .cake-middle { width: 160px; height: 60px; }
    .cake-bottom { width: 210px; height: 70px; }
    
    .frosting-top { width: 130px; }
    .frosting-middle { width: 180px; }
    .frosting-bottom { width: 230px; }
    
    .cake-plate { width: 230px; }
    
    .candles-container {
        gap: 14px;
        top: -65px;
    }
    
    .candle {
        width: 12px;
        height: 45px;
    }
    
    .flame {
        width: 18px;
        height: 24px;
        top: -30px;
    }
    
    .cake-decoration-row {
        font-size: 0.95em;
        gap: 10px;
    }
    
    .birthday-message {
        padding: 20px 25px;
        max-width: 95vw;
    }
    
    .birthday-message h1 {
        font-size: 1.5em;
    }
    
    .message-content {
        font-size: 0.85em;
    }
}